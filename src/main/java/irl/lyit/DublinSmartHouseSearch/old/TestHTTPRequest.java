package irl.lyit.DublinSmartHouseSearch.old;

import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import java.io.IOException;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.util.ArrayList;
import java.util.List;

public class TestHTTPRequest {

  public static void main(String[] args) throws IOException, InterruptedException {

    String postEndpoint = "http://api.traveltimeapp.com/v4/time-map";
    String inputJson = "{\n"
        + "  \"arrival_searches\": [\n"
        + "    {\n"
        + "      \"id\": \"isochrone-0\",\n"
        + "      \"coords\": {\n"
        + "        \"lat\": 53.3398189,\n"
        + "        \"lng\": -6.2381879\n"
        + "      },\n"
        + "      \"travel_time\": 1800,\n"
        + "      \"transportation\": {\n"
        + "        \"type\": \"public_transport\"\n"
        + "      },\n"
        + "      \"arrival_time\": \"2022-03-14T09:00:00.000Z\"\n"
        + "    }\n"
        + "  ]\n"
        + "}";


    HttpRequest request = HttpRequest.newBuilder()
        .uri(URI.create(postEndpoint))
        .header("Content-Type", "application/json")
        .header("X-Application-Id", "a8605824")
        .header("X-Api-Key", "390add03321ba0b75ceda50d6a0baa82")
        .POST(HttpRequest.BodyPublishers.ofString(inputJson))
        .build();


    HttpResponse<String> response = HttpClient.newHttpClient()
        .send(request, HttpResponse.BodyHandlers.ofString());
    System.out.println(response.statusCode());
    System.out.println(response.body());

    ObjectMapper objectMapper = new ObjectMapper();
    JsonNode jsonNode = objectMapper.readTree(response.body());

    List<GeoCoordinates> coordinatesList = new ArrayList<>();

    jsonNode = jsonNode.get("results").get(0).get("shapes").get(0).get("shell");
    for( int i = 0; i < jsonNode.size(); i++) {
      JsonNode tempCoord = jsonNode.get(i);
      double lat = tempCoord.get("lat").asDouble();
      double lng = tempCoord.get("lng").asDouble();
      coordinatesList.add(new GeoCoordinates(lat, lng));
    }

    GeoCoordinates myPlace = new GeoCoordinates(53.4420909, -6.2027893);

    double minLat = coordinatesList.get(0).getLat();
    double maxLat = coordinatesList.get(0).getLat();
    double minLng = coordinatesList.get(0).getLng();
    double maxLng = coordinatesList.get(0).getLng();

    for(GeoCoordinates elem : coordinatesList) {

      minLat = Math.min(minLat, elem.getLat());
      maxLat = Math.max(maxLat, elem.getLat());
      minLng = Math.min(minLng, elem.getLng());
      maxLng = Math.max(maxLng, elem.getLng());

      System.out.println(elem);

    }

    System.out.println();
    System.out.println("minimum lan : " + minLat);
    System.out.println("maximum lan : " + maxLat);
    System.out.println("minimum lng : " + minLng);
    System.out.println("maximum lng : " + maxLng);

  }

  /*
  {
  "results": [
    {
      "search_id": "isochrone-0",
      "shapes": [
        {
          "shell": [
            {
              "lat": 53.44210457574774,
              "lng": -6.206772742580213
            },
            {
              "lat": 53.44205964991819,
              "lng": -6.206697499850881
            },
            {
              "lat": 53.44214950157729,
              "lng": -6.206547014392218
            },
            {
              "lat": 53.44214950157729,
              "lng": -6.206396528933554
            },
            {
              "lat": 53.44228427906594,
              "lng": -6.206170800745559
            },
            {
              "lat": 53.442374130725035,
              "lng": -6.206170800745559
            },
            {
              "lat": 53.442419056554584,
              "lng": -6.2060955580162265
            },
            {
              "lat": 53.442419056554584,
              "lng": -6.205794587098899
            },
            {
              "lat": 53.442329204895486,
              "lng": -6.205644101640236
            },
            {
              "lat": 53.442329204895486,
              "lng": -6.205493616181572
            },
            {
              "lat": 53.442419056554584,
              "lng": -6.205343130722909
            },
            {
              "lat": 53.442419056554584,
              "lng": -6.205042159805582
            },
            {
              "lat": 53.44250890821368,
              "lng": -6.204891674346918
            },
            {
              "lat": 53.44250890821368,
              "lng": -6.204741188888255
            },
            {
              "lat": 53.44246398238413,
              "lng": -6.204665946158922
            },
            {
              "lat": 53.44228427906594,
              "lng": -6.204665946158922
            },
            {
              "lat": 53.44223935323639,
              "lng": -6.204741188888255
            },
            {
              "lat": 53.44223935323639,
              "lng": -6.205343130722909
            },
            {
              "lat": 53.44219442740684,
              "lng": -6.205418373452241
            },
            {
              "lat": 53.44210457574774,
              "lng": -6.205418373452241
            },
            {
              "lat": 53.442014724088644,
              "lng": -6.2052678879935765
            },
            {
              "lat": 53.441924872429546,
              "lng": -6.2052678879935765
            },
            {
              "lat": 53.44183502077045,
              "lng": -6.205117402534913
            },
            {
              "lat": 53.44174516911135,
              "lng": -6.205117402534913
            },
            {
              "lat": 53.44165531745225,
              "lng": -6.204966917076249
            },
            {
              "lat": 53.441475614134056,
              "lng": -6.204966917076249
            },
            {
              "lat": 53.44134083664541,
              "lng": -6.204741188888255
            },
            {
              "lat": 53.44134083664541,
              "lng": -6.2042897325122635
            },
            {
              "lat": 53.44125098498631,
              "lng": -6.2041392470536
            },
            {
              "lat": 53.44125098498631,
              "lng": -6.203988761594936
            },
            {
              "lat": 53.44093650417947,
              "lng": -6.2034620624896135
            },
            {
              "lat": 53.440666949202175,
              "lng": -6.2034620624896135
            },
            {
              "lat": 53.44044232005443,
              "lng": -6.203085848842955
            },
            {
              "lat": 53.44044232005443,
              "lng": -6.202935363384291
            },
            {
              "lat": 53.44035246839533,
              "lng": -6.202784877925628
            },
            {
              "lat": 53.44035246839533,
              "lng": -6.202634392466964
            },
            {
              "lat": 53.44044232005443,
              "lng": -6.2024839070083
            },
            {
              "lat": 53.44044232005443,
              "lng": -6.202333421549636
            },
            {
              "lat": 53.44057709754308,
              "lng": -6.202107693361642
            },
            {
              "lat": 53.44102635583857,
              "lng": -6.202107693361642
            },
            {
              "lat": 53.44116113332721,
              "lng": -6.202333421549636
            },
            {
              "lat": 53.44116113332721,
              "lng": -6.2024839070083
            },
            {
              "lat": 53.44125098498631,
              "lng": -6.202634392466964
            },
            {
              "lat": 53.44125098498631,
              "lng": -6.202784877925628
            },
            {
              "lat": 53.44116113332721,
              "lng": -6.202935363384291
            },
            {
              "lat": 53.44116113332721,
              "lng": -6.203085848842955
            },
            {
              "lat": 53.44120605915676,
              "lng": -6.203161091572286
            },
            {
              "lat": 53.44129591081586,
              "lng": -6.203161091572286
            },
            {
              "lat": 53.44138576247496,
              "lng": -6.203010606113623
            },
            {
              "lat": 53.441924872429546,
              "lng": -6.203010606113623
            },
            {
              "lat": 53.441969798259095,
              "lng": -6.202935363384291
            },
            {
              "lat": 53.441969798259095,
              "lng": -6.202634392466964
            },
            {
              "lat": 53.44165531745225,
              "lng": -6.202107693361642
            },
            {
              "lat": 53.44120605915676,
              "lng": -6.202107693361642
            },
            {
              "lat": 53.44116113332721,
              "lng": -6.202032450632309
            },
            {
              "lat": 53.441520539963605,
              "lng": -6.201430508797655
            },
            {
              "lat": 53.441520539963605,
              "lng": -6.2008285669630006
            },
            {
              "lat": 53.441565465793154,
              "lng": -6.200753324233669
            },
            {
              "lat": 53.44165531745225,
              "lng": -6.200753324233669
            },
            {
              "lat": 53.44174516911135,
              "lng": -6.200602838775005
            },
            {
              "lat": 53.4417900949409,
              "lng": -6.200678081504337
            },
            {
              "lat": 53.4417900949409,
              "lng": -6.2008285669630006
            },
            {
              "lat": 53.4418799466,
              "lng": -6.200979052421665
            },
            {
              "lat": 53.4418799466,
              "lng": -6.201129537880328
            },
            {
              "lat": 53.442014724088644,
              "lng": -6.201355266068323
            },
            {
              "lat": 53.44219442740684,
              "lng": -6.201355266068323
            },
            {
              "lat": 53.442329204895486,
              "lng": -6.201129537880328
            },
            {
              "lat": 53.441969798259095,
              "lng": -6.200527596045673
            },
            {
              "lat": 53.44205964991819,
              "lng": -6.20037711058701
            },
            {
              "lat": 53.44205964991819,
              "lng": -6.200076139669683
            },
            {
              "lat": 53.442374130725035,
              "lng": -6.19954944056436
            },
            {
              "lat": 53.44255383404323,
              "lng": -6.19954944056436
            },
            {
              "lat": 53.44264368570233,
              "lng": -6.199699926023023
            },
            {
              "lat": 53.44273353736143,
              "lng": -6.19954944056436
            },
            {
              "lat": 53.442778463190976,
              "lng": -6.199624683293692
            },
            {
              "lat": 53.442778463190976,
              "lng": -6.199775168752356
            },
            {
              "lat": 53.442823389020525,
              "lng": -6.1998504114816875
            },
            {
              "lat": 53.44291324067962,
              "lng": -6.1998504114816875
            },
            {
              "lat": 53.44300309233872,
              "lng": -6.200000896940351
            },
            {
              "lat": 53.44304801816827,
              "lng": -6.199925654211019
            },
            {
              "lat": 53.44304801816827,
              "lng": -6.199323712376365
            },
            {
              "lat": 53.44309294399782,
              "lng": -6.199248469647033
            },
            {
              "lat": 53.44318279565692,
              "lng": -6.199248469647033
            },
            {
              "lat": 53.443272647316014,
              "lng": -6.199097984188369
            },
            {
              "lat": 53.44336249897511,
              "lng": -6.199097984188369
            },
            {
              "lat": 53.44345235063421,
              "lng": -6.199248469647033
            },
            {
              "lat": 53.44354220229331,
              "lng": -6.199248469647033
            },
            {
              "lat": 53.443632053952406,
              "lng": -6.199398955105696
            },
            {
              "lat": 53.443721905611504,
              "lng": -6.199398955105696
            },
            {
              "lat": 53.44376683144105,
              "lng": -6.199474197835029
            },
            {
              "lat": 53.44376683144105,
              "lng": -6.199624683293692
            },
            {
              "lat": 53.44349727646376,
              "lng": -6.200076139669683
            },
            {
              "lat": 53.44349727646376,
              "lng": -6.200226625128346
            },
            {
              "lat": 53.443632053952406,
              "lng": -6.200452353316342
            },
            {
              "lat": 53.444081312247896,
              "lng": -6.200452353316342
            },
            {
              "lat": 53.444126238077445,
              "lng": -6.200527596045673
            },
            {
              "lat": 53.44376683144105,
              "lng": -6.201129537880328
            },
            {
              "lat": 53.44376683144105,
              "lng": -6.201280023338992
            },
            {
              "lat": 53.4439016089297,
              "lng": -6.201505751526987
            },
            {
              "lat": 53.444171163906994,
              "lng": -6.201505751526987
            },
            {
              "lat": 53.44426101556609,
              "lng": -6.201355266068323
            },
            {
              "lat": 53.44435086722519,
              "lng": -6.201355266068323
            },
            {
              "lat": 53.44471027386158,
              "lng": -6.200753324233669
            },
            {
              "lat": 53.44480012552068,
              "lng": -6.200753324233669
            },
            {
              "lat": 53.445024754668424,
              "lng": -6.201129537880328
            },
            {
              "lat": 53.445024754668424,
              "lng": -6.201881965173646
            },
            {
              "lat": 53.444979828838875,
              "lng": -6.201957207902978
            },
            {
              "lat": 53.44426101556609,
              "lng": -6.201957207902978
            },
            {
              "lat": 53.444171163906994,
              "lng": -6.2018067224443145
            },
            {
              "lat": 53.4439914605888,
              "lng": -6.202107693361642
            },
            {
              "lat": 53.4439016089297,
              "lng": -6.202107693361642
            },
            {
              "lat": 53.4438117572706,
              "lng": -6.202258178820305
            },
            {
              "lat": 53.443632053952406,
              "lng": -6.202258178820305
            },
            {
              "lat": 53.44349727646376,
              "lng": -6.2024839070083
            },
            {
              "lat": 53.44349727646376,
              "lng": -6.202634392466964
            },
            {
              "lat": 53.443632053952406,
              "lng": -6.202860120654959
            },
            {
              "lat": 53.443721905611504,
              "lng": -6.202860120654959
            },
            {
              "lat": 53.44385668310015,
              "lng": -6.203085848842955
            },
            {
              "lat": 53.44385668310015,
              "lng": -6.203236334301618
            },
            {
              "lat": 53.4438117572706,
              "lng": -6.20331157703095
            },
            {
              "lat": 53.44345235063421,
              "lng": -6.20331157703095
            },
            {
              "lat": 53.44340742480466,
              "lng": -6.203386819760282
            },
            {
              "lat": 53.44349727646376,
              "lng": -6.203537305218946
            },
            {
              "lat": 53.44349727646376,
              "lng": -6.203687790677609
            },
            {
              "lat": 53.443721905611504,
              "lng": -6.204064004324268
            },
            {
              "lat": 53.444081312247896,
              "lng": -6.204064004324268
            },
            {
              "lat": 53.444126238077445,
              "lng": -6.2041392470536
            },
            {
              "lat": 53.44403638641835,
              "lng": -6.2042897325122635
            },
            {
              "lat": 53.44403638641835,
              "lng": -6.2044402179709275
            },
            {
              "lat": 53.444126238077445,
              "lng": -6.204590703429591
            },
            {
              "lat": 53.444126238077445,
              "lng": -6.204741188888255
            },
            {
              "lat": 53.44430594139564,
              "lng": -6.205042159805582
            },
            {
              "lat": 53.44430594139564,
              "lng": -6.205192645264245
            },
            {
              "lat": 53.44439579305474,
              "lng": -6.205343130722909
            },
            {
              "lat": 53.44426101556609,
              "lng": -6.205568858910904
            },
            {
              "lat": 53.4439914605888,
              "lng": -6.205568858910904
            },
            {
              "lat": 53.4439016089297,
              "lng": -6.205719344369568
            },
            {
              "lat": 53.44345235063421,
              "lng": -6.205719344369568
            },
            {
              "lat": 53.44331757314556,
              "lng": -6.205945072557563
            },
            {
              "lat": 53.44340742480466,
              "lng": -6.2060955580162265
            },
            {
              "lat": 53.44340742480466,
              "lng": -6.2062460434748905
            },
            {
              "lat": 53.44358712812286,
              "lng": -6.206547014392218
            },
            {
              "lat": 53.44358712812286,
              "lng": -6.206697499850881
            },
            {
              "lat": 53.443676979781955,
              "lng": -6.206847985309545
            },
            {
              "lat": 53.443632053952406,
              "lng": -6.206923228038876
            },
            {
              "lat": 53.442374130725035,
              "lng": -6.206923228038876
            },
            {
              "lat": 53.44228427906594,
              "lng": -6.206772742580213
            },
            {
              "lat": 53.44210457574774,
              "lng": -6.206772742580213
            }
          ],
          "holes": []
        }
      ],
      "properties": {}
    }
  ]
}
   */

}
